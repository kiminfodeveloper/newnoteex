<!DOCTYPE html>
<html lang="pt-BR">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Bloco de Notas Pro - Janela Independente</title>
        <link rel="stylesheet" href="styles.css" />
        <link
            href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap"
            rel="stylesheet"
        />
        <style>
            /* Override styles for standalone window */
            body {
                width: 100vw !important;
                height: 100vh !important;
                max-height: 100vh !important;
                min-width: 400px;
                min-height: 500px;
            }

            #app {
                width: 100%;
                height: 100%;
            }

            .header {
                padding: 16px 20px;
            }

            .search-container,
            .category-container,
            .notes-container {
                margin-left: 20px;
                margin-right: 20px;
            }

            .btn-add-note {
                margin-left: 20px;
                margin-right: 20px;
                width: calc(100% - 40px);
            }

            /* Hide popout button in standalone */
            #popoutBtn {
                display: none;
            }

            /* Add window controls */
            .window-controls {
                position: absolute;
                top: 16px;
                right: 20px;
                display: flex;
                gap: 8px;
                z-index: 200;
            }

            .window-control-btn {
                width: 20px;
                height: 20px;
                border: none;
                border-radius: 50%;
                cursor: pointer;
                font-size: 12px;
                display: flex;
                align-items: center;
                justify-content: center;
                transition: all 0.2s ease;
            }

            .minimize-btn {
                background: #ffc107;
                color: #000;
            }

            .close-btn {
                background: #dc3545;
                color: #fff;
            }

            .window-control-btn:hover {
                opacity: 0.8;
                transform: scale(1.1);
            }

            /* Draggable area */
            .header {
                -webkit-app-region: drag;
                user-select: none;
            }

            .header-controls,
            .theme-selector,
            .btn-icon {
                -webkit-app-region: no-drag;
            }
        </style>
    </head>
    <body>
        <!-- Window Controls -->
        <div class="window-controls">
            <button
                class="window-control-btn minimize-btn"
                onclick="window.minimize()"
                title="Minimizar"
            >
                ‚àí
            </button>
            <button
                class="window-control-btn close-btn"
                onclick="window.close()"
                title="Fechar"
            >
                √ó
            </button>
        </div>

        <div id="app" class="theme-light">
            <!-- Header -->
            <div class="header">
                <h1 class="logo">
                    <span class="logo-icon">üìù</span>
                    Bloco de Notas Pro
                </h1>
                <div class="header-controls">
                    <select id="themeSelector" class="theme-selector">
                        <option value="light">Light</option>
                        <option value="dark">Dark</option>
                        <option value="bluemoon">BlueMoon</option>
                    </select>
                    <button
                        id="popoutBtn"
                        class="btn-icon"
                        title="Abrir em janela separada"
                        style="display: none"
                    >
                        <span>üóó</span>
                    </button>
                    <button
                        id="exportBtn"
                        class="btn-icon"
                        title="Exportar Notas"
                    >
                        <span>üì§</span>
                    </button>
                    <button
                        id="importBtn"
                        class="btn-icon"
                        title="Importar Notas"
                    >
                        <span>üì•</span>
                    </button>
                    <input
                        type="file"
                        id="importFile"
                        accept=".json,.txt"
                        style="display: none"
                    />
                </div>
            </div>

            <!-- Search Bar -->
            <div class="search-container">
                <input
                    type="text"
                    id="searchInput"
                    placeholder="Pesquisar notas..."
                    class="search-input"
                />
                <button id="clearSearch" class="btn-clear">‚úï</button>
            </div>

            <!-- Category Filter -->
            <div class="category-container">
                <select id="categoryFilter" class="category-filter">
                    <option value="">Todas as categorias</option>
                </select>
            </div>

            <!-- Add Note Button -->
            <button id="addNoteBtn" class="btn-add-note">
                <span class="btn-icon">+</span>
                Nova Nota
            </button>

            <!-- Notes Container -->
            <div id="notesContainer" class="notes-container">
                <!-- Notes will be dynamically added here -->
            </div>

            <!-- Empty State -->
            <div id="emptyState" class="empty-state" style="display: none">
                <div class="empty-icon">üìã</div>
                <h3>Nenhuma nota encontrada</h3>
                <p>Crie sua primeira nota clicando em "Nova Nota"</p>
            </div>

            <!-- Note Editor Modal -->
            <div id="noteModal" class="modal" style="display: none">
                <div class="modal-content">
                    <div class="modal-header">
                        <input
                            type="text"
                            id="noteTitle"
                            placeholder="T√≠tulo da nota..."
                            class="note-title-input"
                        />
                        <div class="modal-controls">
                            <select
                                id="noteCategory"
                                class="note-category-select"
                            >
                                <option value="">Sem categoria</option>
                                <option value="trabalho">üè¢ Trabalho</option>
                                <option value="pessoal">üë§ Pessoal</option>
                                <option value="estudos">üìö Estudos</option>
                                <option value="ideias">üí° Ideias</option>
                                <option value="tarefas">‚úÖ Tarefas</option>
                            </select>
                            <button
                                id="pinNoteBtn"
                                class="btn-pin"
                                title="Fixar nota"
                            >
                                <span>üìå</span>
                            </button>
                            <button id="closeModal" class="btn-close">‚úï</button>
                        </div>
                    </div>
                    <textarea
                        id="noteContent"
                        placeholder="Escreva sua nota aqui..."
                        class="note-textarea"
                    ></textarea>
                    <div class="modal-footer">
                        <div class="note-info">
                            <span id="noteDate" class="note-date"></span>
                            <span id="charCount" class="char-count"
                                >0 caracteres</span
                            >
                        </div>
                        <div class="modal-actions">
                            <button id="deleteNoteBtn" class="btn-delete">
                                Excluir
                            </button>
                            <button id="saveNoteBtn" class="btn-save">
                                Salvar
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <script src="popup.js"></script>
    </body>
</html>
